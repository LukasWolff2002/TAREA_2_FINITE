\documentclass{article}  % Define la clase del documento.

% Paquetes de idioma y codificación
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}  % Ajusta el idioma del documento a español.
\addto\captionsspanish{
  \renewcommand{\figurename}{Figure}
  \renewcommand{\tablename}{Table}
}

\usepackage{tabularx}  % Permite la creación de tablas con ancho ajustable.

\usepackage{caption}
\usepackage{subcaption}

% Paquete de geometría para configurar márgenes y tamaño de papel
\usepackage[letterpaper, margin=3cm]{geometry}

% Paquetes de tipografía
\usepackage{mathptmx}    % Usa Times New Roman como fuente.
\usepackage{microtype}   % Mejora la justificación del texto.

% Paquetes para manejo de colores y gráficos
\usepackage{xcolor}      % Define y utiliza colores.
\usepackage{graphicx}    % Permite la inserción de imágenes.
\usepackage{tikz}        % Creación de gráficos vectoriales.

% Configuración de enlaces y referencias cruzadas
\usepackage{hyperref}
\hypersetup{
    colorlinks   = true,
    linkcolor    = darkblue,
    citecolor    = black,
    filecolor    = blue,
    urlcolor     = blue
}

\usepackage{media9} % Permite la inserción de multimedia.

% Paquetes para la mejora visual de tablas y figuras
\usepackage{booktabs}    % Para tablas de alta calidad.
\usepackage{float}       % Controla la posición de figuras y tablas.

% Paquete para la personalización de códigos fuente
\usepackage{listings}
\lstset{
    literate=
    {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
    {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
    {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {ü}{{\"u}}1 {Ü}{{\"U}}1,
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codepurple},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{red},
    basicstyle=\ttfamily\small,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    language=TeX,
    morecomment=[l]\#,
    frame=single,
    rulecolor=\color{black}
}

% Definición de colores al estilo Visual Studio Code
\definecolor{darkblue}{rgb}{0.0, 0.0, 0.55}  % Enlaces
\definecolor{codegreen}{rgb}{0.25, 0.49, 0.48}  % Comentarios
\definecolor{codegray}{rgb}{0.5, 0.5, 0.5}  % Números y anotaciones
\definecolor{codepurple}{rgb}{0.58, 0, 0.82}  % Palabras clave
\definecolor{backcolour}{rgb}{0.95, 0.95, 0.92}  % Fondo de código

% Configuraciones de párrafo y matemáticas
\usepackage{amsmath}
\usepackage{parskip}    % Espaciado entre párrafos.
\usepackage{ragged2e}   % Justificación mejorada.
\usepackage{multicol}

% Configuración de secciones y encabezados
\usepackage{titlesec}
\titleclass{\part}{top} % Make part like a class
\titleformat{\part}[display]
  {\normalfont\huge\bfseries\centering}{\thepart}{40pt}{\Huge}
\titlespacing*{\part}{0pt}{-60pt}{10pt}
\titleformat{\part}
  {\normalfont\huge\bfseries}{}{0pt}{}

% Asegúrate de usar esto para mantener el estilo en las páginas de las partes
\titleformat{\part}[display]
  {\normalfont\huge\bfseries}{}{0pt}{}
  [\thispagestyle{fancy}] % Aplica el estilo fancy a las páginas de las partes

% Configuración de encabezados y pies de página personalizados
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\raisebox{0.20cm}{\textbf{Finite Elements - IOC5107}}}
\fancyhead[R]{\raisebox{0.1cm}{\includegraphics[width=0.25\linewidth]{LOGO_UNIVERSIDAD.jpg}}}
\fancyhead[C]{\rule{\textwidth}{0.6pt}}
\fancyfoot[C]{\rule{\textwidth}{0.6pt}}
\fancyfoot[R]{\raisebox{-1.5\baselineskip}{\thepage}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% Configuración avanzada de geometría
\geometry{
  top=3.5cm, % Aumenta el espacio en la parte superior para subir el encabezado
  bottom=2.5cm,
  headheight=2.5cm % Aumenta la altura del encabezado si es necesario
}

% Configuracion de bibliografia
\usepackage{natbib}
\bibliographystyle{unsrtnat}  % Puedes cambiarlo por `unsrtnat`, `abbrvnat`, etc.

\begin{document}
%----------------------------------------------------------------------------------------
% PORTADA
%----------------------------------------------------------------------------------------
\begin{titlepage}%Inicio de la carátula, solo modificar los datos necesarios
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} 
\center 
%----------------------------------------------------------------------------------------
%	ENCABEZADO
%----------------------------------------------------------------------------------------
\includegraphics[width=10cm]{LOGO_UNIVERSIDAD.jpg}\\ % Si esta plantilla se copio correctamente, va a llevar la imagen del logo de la facultad.OBS: Es necesario incluir el paquete: graphicx
\vspace{3cm}
%----------------------------------------------------------------------------------------
%	SECCION DEL TITULO
%----------------------------------------------------------------------------------------
\HRule \\[0.4cm]
{ \huge \bfseries Finite Elements - IOC5107}\\[0.4cm] % Titulo del documento
{ \huge \bfseries Final Report}\\[0.4cm] % Titulo del documento
\HRule \\[1.5cm]
 \vspace{5cm}
%----------------------------------------------------------------------------------------
%	SECCION DEL AUTOR
%----------------------------------------------------------------------------------------
\begin{flushright}
  { \textbf{Profesor:}\\
  José Antonio Abell\\
  \textbf{Ayudante:}\\
  Nicolás\\
  \textbf{Alumnos:} \\
  Felipe Vicencio\\
  Lukas Wolff\\
}
\end{flushright}
\vspace{1cm}
%----------------------------------------------------------------------------------------
%	SECCION DE LA FECHA
%----------------------------------------------------------------------------------------
{\large \textbf{\today}}\\[2cm] % El comando \today coloca la fecha del dia, y esto se actualiza con cada compilacion, en caso de querer tener una fecha estatica, reemplazar el \today por la fecha deseada
\end{titlepage}

\newpage
\thispagestyle{empty} % Deshabilita el número de página en la página del índice

%----------------------------------------------------------------------------------------
%  INDICE
%----------------------------------------------------------------------------------------
%\newpage
%\thispagestyle{empty} % Deshabilita el número de página en la página del índice
%\tableofcontents
%\thispagestyle{plain} % Deshabilita el encabezado en la página del índice
%\thispagestyle{empty} % Deshabilita el número de página en la página del índice
%\newpage

%\newpage
%\thispagestyle{empty}
%\listoffigures 
%\thispagestyle{plain} % Deshabilita el encabezado en la página del índice %
%\thispagestyle{empty}
\newpage
%----------------------------------------------------------------------------------------
%ACÁ EMPIEZA EL INFORME
\setcounter{page}{1}
%----------------------------------------------------------------------------------------

\section{Introduction}

Finite Element Analysis (FEA) is a numerical method for predicting the response of structures under loading conditions. By discretizing a continuous domain into smaller elements, the method allows to compute distributions of stress, strain, and displacement.

This report presents the structural analysis of a 3D-printed wrench using 2D triangular constant strain triangle (CST) elements under the plane stress assumption. The main objective is to investigate the mechanical behavior of the wrench under different loading scenarios, focusing on its deformation and internal stress/strain states.

Three cases are considered: (a) a total vertical load of 30 kgf applied as a distributed force, (b) the same load applied at a single node, and (c) a distributed load including the effect of self-weight. Each case includes graphs of the deformed shape, stress and strain components, principal values, and a discussion of mesh convergence and precision techniques.

The analysis also includes an optimization study to minimize the maximum principal tensile stress while maintaining constant material volume. The analysis was perfomed using a \textit{Python} program that implementes this methodology. For the mesh generation and optimization, the GMESH \textit{software} was used.

\newpage

\section{Theoretical background}

\subsection{Finite Element Method (FEM)}

The Finite Element Method (FEM) is a numerical technique used to solve complex engineering problems. It involves dividing a large system into smaller and simpler parts called finite elements. The behavior of each element is described by a set of equations, and the overall response of the system is obtained by assembling these equations. The method used in this report is the CST based model.

\subsection{CST elements}

The CST (Constant Strain Triangle) is a 2D, three-node finite element used for plane stress/strain problems.  
It assumes linear displacement fields, producing constant strain and stress within each element. The CST element is defined by three nodes, each with two degrees of freedom (DOF) corresponding to the in-plane displacements. The element stiffness matrix is derived from the shape functions and material properties, allowing for the calculation of nodal displacements and internal forces.

\subsection{Plane stress assumption}

This condition applies to thin structures where the stress components perpendicular to the plane are negligible. Mathematically, this means $\sigma_z = \tau_{xz} = \tau_{yz} = 0$. The dominant stress components are $\sigma_{xx}$, $\sigma_{yy}$, and $\sigma_{xy}$. This assumption is typically valid in thin plates or sheets subjected to in-plane loading and is commonly used in finite element analysis (FEA) with 2D CST elements under plane stress conditions.

\subsection{Plane strain assumption}

This assumption is used for long or thick bodies where deformation in one direction (usually the z-axis) is constrained. In this case, the strain components are $\varepsilon_z = \gamma_{xz} = \gamma_{yz} = 0$, although $\sigma_z$ can be non-zero. This is applicable to structures such as tunnels, dams, and thick-walled pressure vessels. All in-plane stress components remain active, and a different constitutive matrix $\mathbf{D}$ is used compared to the plane stress condition.

\subsection{Shape functions}

The shape functions are used to interpolate the displacements within the element based on the nodal displacements. For a CST element, the shape functions are defined as:

\begin{equation}
  N_i(\xi) = \begin{bmatrix}
  \xi_1 & 0 & \xi_2 & 0 & \xi_3 & 0 \\
  0 & \xi_1 & 0 & \xi_2 & 0 & \xi_3
  \end{bmatrix}
\end{equation}

Where $\xi_1$, $\xi_2$, and $\xi_3$ are the coordinates of the nodes in the local coordinate system. The shape functions are used to relate the nodal displacements to the displacements at any point within the element.
The shape functions are linear and can be expressed in terms of the local coordinates $\xi$ and $\eta$ as follows:
\begin{equation}
  N_1 = \frac{1}{2} (1 - \xi - \eta), \quad N_2 = \frac{1}{2} (1 + \xi), \quad N_3 = \frac{1}{2} (1 + \eta)
\end{equation}

\subsection{Strain displacement matrix}

The strain displacement matrix relates the nodal displacements to the interal deformation of the element. For a CST element, the strain-displacement matrix $\mathbf{B}$ is defined as:

\begin{equation}
  B = \begin{bmatrix}
  \frac{\partial \xi_1}{\partial x} & 0 & \frac{\partial \xi_2}{\partial x} & 0 & \frac{\partial \xi_3}{\partial x} & 0 \\
  0 & \frac{\partial \xi_1}{\partial y} & 0 & \frac{\partial \xi_2}{\partial y} & 0 & \frac{\partial \xi_3}{\partial y} \\
  \frac{\partial \xi_1}{\partial y} & \frac{\partial \xi_1}{\partial x} & \frac{\partial \xi_2}{\partial y} & \frac{\partial \xi_2}{\partial x} & \frac{\partial \xi_3}{\partial y} & \frac{\partial \xi_3}{\partial x}
  \end{bmatrix}
\end{equation}

This matrix derives the shape functions in order to obtain the internal strain components as follows:

\begin{equation}
  \begin{bmatrix}
  \varepsilon_x \\
  \varepsilon_y \\
  \gamma_{xy}
  \end{bmatrix} = \mathbf{B} \begin{bmatrix}
  u_1 \\
  u_2 \\
  u_3
  \end{bmatrix}
\end{equation}

Where $\varepsilon_x$ and $\varepsilon_y$ are the normal strains in the x and y directions, respectively, and $\gamma_{xy}$ is the shear strain. The vector of nodal displacements is represented by $u_1$, $u_2$, and $u_3$.

\subsection{Stiffness matrix}

The stiffness matrix is used to calculate the internal forces and displacements ot the element from the nodal displacements. 

\begin{equation}
  K^{(e)} = \int_{\Omega^{(e)}} B^T E B \, t \, d\Omega^{(e)}
\end{equation}

Where $K^{(e)}$ is the element stiffness matrix, $E$ is the material's elastic modulus, $t$ is the thickness of the element, and $\Omega^{(e)}$ is the area of the element. The stiffness matrix relates the nodal forces to the nodal displacements as follows:

\begin{equation}
  \mathbf{F} = \mathbf{K} \mathbf{u}
\end{equation}

\subsection{Nodal forces vector}

To obtain the nodal forces vector, a body force is applied (self-weight), then the nodal forces vector is calculated as follows:

\begin{equation}
  f^{(e)} = \int_{\Omega^{(e)}} t \left( N^{(e)} \right)^T b \, d\Omega^{(e)}
\end{equation}

Where $f^{(e)}$ is the nodal forces vector, $N^{(e)}$ is the shape function matrix, and $b$ is the body force vector. The nodal forces vector relates the body forces to the nodal displacements as follows:
\begin{equation}
  \mathbf{F} = \mathbf{K} \mathbf{u} + \mathbf{f}
\end{equation}

\subsection{Von Mises stress Criterion}

In structural analysis, the Von Mises stress is widley used as a yield and failure crtierion. The Von Mises stress is a scalar value derived from the stress components and provides a singles equivalent stress that can be directly compared to the material's yield strenght.
Under plane stress conditions, the Von Mises stress $\sigma_{VM}$ is calcultaed using the in-plane stresses as follows:

\begin{equation}
  \sigma_{VM} = \sqrt{ \sigma_{xx}^2 - \sigma_{xx} \sigma_{yy} + \sigma_{yy}^2 + 3\sigma_{xy}^2 }
\end{equation}
  

Where $\sigma_{xx}$ and $\sigma_{yy}$ are the normal stresses in the x and y directions, respectively, and $\tau_{xy}$ is the shear stress in the xy plane. 
\newpage

\section{Materials for the model}

For this asignment, a wrech was design using the GMESH \textit{software}. The wrench was designed to be 3D printed, and the material used was PLA. 

This material is a thermoplastic polymer that is widley used in 3D printing due to its mechanical properties. Moreover, depending on the printing orientation, fill density and extrusion temperature, the mechanical properties of PLA can vary significantly. For this analysis, the following properties were used:

\begin{itemize}
  \item Young's modulus: $3.5 \times 10^9 Pa$
  \item Poisson's ratio: 0.36
  \item Tensile Yield strength: $50 \times 10^6 Pa $
  \item Density: $1.252 \times 10^3 kg/m^3$
\end{itemize}

These values were chosen based on the standard levels used in other experiences. CITAR PAPER

\newpage

\section{Description of the model}

The model for this assignment was a wrench designed using the GMESH \textit{software}. The purpose of this was to analyze the mechanical behavior of the structure under 3 different cases. 

The first case was a distributed load applied to one end of the wrench, as shown in Figure \ref{caso1}.

The second case was a point load applied to the same end of the first case. The variation from this case to the previous one is considerable, due to the force being adjusted to only one node instead to a list of nodes.

At last, the third case was similar to case 1, but with the addition of a self-weight load. This was done by adding a body force to the model in that same region.

\begin{figure}[H]
  \centering
  \includegraphics[width=0.8\textwidth]{img/wrench.png}
  \caption{Wrench model with limited boundaries and regions of particular behavior.}
  \label{caso1}
\end{figure}

\include{results}
\include{preguntas}

\end{document}